---
layout: post
title: "关于controller与service的思考"
date: 2019-12-29 
description: "关于controller与service"
tag: 博客 
---   

　　纯粹记录自己学习路上的一些胡思乱想，如是有任何问题愿您能及时联系我。

mail： `CL30240@163.COM`

## 问题：

最近我们的技术经理给我们抛了一个问题：你们觉得，究竟controller是干什么的？service是干什么的？为什么要分出controller层与service层？

## 描述：

先说说目前工作环境的情况，目前的controller层主要做的就是校验参数与接收请求。然后就没有做其他的用途了。做个假设，如果service能够接收请求的话，是不是就完全可以把controller给代替了？那么，controller到底为什么而存在呢？

我在网上找了很多的帖子，发现了一个讲的特别好的帖子。然后我通过他的帖子再结合自己的想法做了一些小小的总结。

## 参考：
帖子的大概内容是这样的，可以把咱们的项目比喻成一个餐厅，餐厅营业与客户直接打交道，直接完成客户诉求的是服务员。服务员从客户那边接收到需求，将需求划分开，哪些是厨房里面要处理的，哪些是外面需要处理的，协调好餐厅的资源来满足客户的所有需求。餐厅里面肯定有很多个服务员，那肯定也有很多的厨师，厨师完成服务员让他们做的菜。不同的厨师擅长的菜肯定也有些许的不同。在厨房里面还有一些帮助厨师配菜的配菜师（或者叫打杂的），他们就是要帮厨师准备好做某一道菜的所有材料。

## 个人理解：
上面讲的是大概的思路，那么接下来就将整个流程讲一遍。

顾客从走进了我的餐厅并入座，服务员端上茶水与小食。顾客拿起了菜单，开始向服务员点菜。点了一道红烧带鱼，再点了一个炭烤生蚝，服务员这个时候告诉他，不好意思，生蚝已经卖完了，没有了。再点了一个酸辣土豆丝与一个西红柿蛋汤。服务员确认顾客是否已经点完菜，然后确认顾客的口味偏好。确认完毕后将菜单一式两份，一份给厨房，一份给前台。服务员将不同的菜品分发给不同的厨师做，配菜师傅将菜给厨师配好，不久菜就做好了，服务员端上桌给客户享用。客户用完餐后，去前台买单，然后服务送客户离开，然后转身将桌子收拾干净。那么整个流程就结束了。

咱们使用面向对象的角度对这整个流程进行划分。这里面有几个角色服务员，前台，厨师，配菜师傅，与餐厅。
```
餐厅：满足客户对食物与休息的需求。  - 项目/功能模块

前台：负责引导与结束。  - controller

服务员：负责将任务划分成不同的部分并分配给不同的对象去完成。  - controller

厨师：负责完成接收到的任务。  - service

配菜师傅：负责将菜品需要的原材料取出，并简单搭配好。 - dao
```

其实，在更大的项目中，可能并不是简单的分成这3层。但是都可类比成这三种情况。举个简单的例子，分布式的系统中，会分为服务工程与调用工程。调用项目中有controller与service，服务项目中可能会有controller，service，dao。那么组装在一起，该怎样的确定他是属于哪一层，或者说我的逻辑代码应该写在哪里呢？目前针对这种情况，我个人的理解是，整个调用层承担的是前台，服务员与厨师的角色，服务工程后承担的是配菜师傅的角色，只不过配菜师傅比传统的配菜师傅准备的更加充分。

